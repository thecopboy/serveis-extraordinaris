# =============================================================================
# SERVEIS EXTRAORDINARIS - CONFIGURACI√ì D'ENTORN
# =============================================================================
# Aquest fitxer √©s una plantilla. Copia'l a .env i personalitza els valors.
# 
# üîí SEGURETAT:
#   - Mai comparteixis el fitxer .env real (est√† a .gitignore)
#   - Genera nous secrets JWT per producci√≥
#   - Usa contrasenyes fortes per la base de dades
#   - Revisa CORS_ORIGIN abans de desplegar
# 
# üìñ DOCUMENTACI√ì: https://github.com/thecopboy/serveis-extraordinaris
# =============================================================================

# =============================================================================
# ENTORN D'EXECUCI√ì
# =============================================================================

# Entorn de Node.js
# Valors permesos: development | production | test
# - development: Logs detallats (debug), hot reload, pino-pretty amb colors
# - production: Logs optimitzats (info), jobs programats actius, JSON
# - test: Per executar tests unitaris
NODE_ENV=development

# =============================================================================
# CONFIGURACI√ì DEL SERVIDOR
# =============================================================================

# Port del servidor HTTP
# Recomanat: 5000 en development, 3000-8080 en producci√≥
PORT=5000

# Host del servidor
# - localhost: Nom√©s accessible localment (development)
# - 0.0.0.0: Accepta connexions externes (producci√≥)
HOST=localhost

# =============================================================================
# BASE DE DADES (PostgreSQL)
# =============================================================================

# Host de la base de dades
# - localhost: Base de dades local
# - IP/hostname: Base de dades remota
DB_HOST=localhost

# Port de PostgreSQL (per defecte: 5432)
DB_PORT=5432

# Usuari de la base de dades
DB_USER=serveis_user

# Contrasenya de la base de dades
# ‚ö†Ô∏è IMPORTANT: Canvia aix√≤ en producci√≥ amb una contrasenya forta!
# Recomanacions:
#   - M√≠nim 16 car√†cters
#   - Combinaci√≥ de maj√∫scules, min√∫scules, n√∫meros i s√≠mbols
#   - Genera amb: openssl rand -base64 24
DB_PASSWORD=ChangeMeInProduction!

# Nom de la base de dades
DB_NAME=serveis_extraordinaris

# =============================================================================
# AUTENTICACI√ì JWT
# =============================================================================

# Secret per Access Tokens (tokens curts, 15 minuts)
# ‚ö†Ô∏è CR√çTIC: Genera un secret nou i √∫nic per producci√≥
# Comanda per generar: openssl rand -base64 32
# O amb Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
JWT_SECRET=your-very-secure-jwt-secret-here-change-in-production

# Secret per Refresh Tokens (tokens llargs, 7 dies)
# ‚ö†Ô∏è CR√çTIC: Ha de ser diferent de JWT_SECRET
# Genera un altre secret amb la mateixa comanda
JWT_REFRESH_SECRET=your-very-secure-refresh-secret-here-change-in-production

# Durada dels Access Tokens
# Format: https://github.com/vercel/ms
# Exemples: 15m, 1h, 2d
# Recomanat: 15m (15 minuts) per seguretat
JWT_ACCESS_EXPIRES_IN=15m

# Durada dels Refresh Tokens
# Format: https://github.com/vercel/ms
# Exemples: 7d, 30d, 90d
# Recomanat: 7d (7 dies) per equilibrar comoditat i seguretat
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================

# Origins permesos per fer peticions a l'API
# ‚ö†Ô∏è IMPORTANT: Nom√©s origins de confian√ßa! Seguretat cr√≠tica.
# 
# Format: Llista separada per comes (sense espais)
# Development: Normalment el frontend local (Vite usa 5173, CRA usa 3000)
# Production: Domini(s) real(s) del frontend
# 
# Exemples:
#   Development (m√∫ltiples ports): http://localhost:3000,http://localhost:5173
#   Production (1 domini): https://app.bombers.cat
#   Production (m√∫ltiples): https://app.bombers.cat,https://admin.bombers.cat
#   Mixed: http://localhost:3000,https://staging.bombers.cat,https://app.bombers.cat
# 
# Notes:
#   - NO usar http:// en producci√≥ (nom√©s https://)
#   - NO incloure trailing slash (/)
#   - NO incloure paths (/api, /login, etc.)
#   - Peticions sense origin (Postman, curl, apps m√≤bils) sempre permeses
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# =============================================================================
# LOGGING (Pino)
# =============================================================================

# Nivell de logging
# Valors: trace | debug | info | warn | error | fatal
# 
# - trace: Molt detallat, per debugging profund
# - debug: Informaci√≥ de debugging (development)
# - info: Informaci√≥ general (production) ‚úÖ Recomanat per producci√≥
# - warn: Avisos (production)
# - error: Nom√©s errors
# - fatal: Nom√©s errors cr√≠tics
# 
# Recomanaci√≥:
#   Development: debug
#   Production: info o warn
LOG_LEVEL=debug

# =============================================================================
# JOBS PROGRAMATS (node-cron)
# =============================================================================

# Horari del job de neteja de tokens expirats/revocats
# Format cron: minut hora dia mes dia_setmana
# 
# Exemples:
#   '0 3 * * *'    ‚Üí Cada dia a les 3:00 AM (recomanat)
#   '0 */6 * * *'  ‚Üí Cada 6 hores
#   '*/30 * * * *' ‚Üí Cada 30 minuts (nom√©s per testing)
#   '0 2 * * 0'    ‚Üí Cada diumenge a les 2:00 AM
# 
# Guia r√†pida:
#   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ minut (0-59)
#   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ hora (0-23)
#   ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ dia del mes (1-31)
#   ‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ mes (1-12)
#   ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îå dia de la setmana (0-7, 0 i 7 = diumenge)
#   * * * * *
CLEANUP_SCHEDULE=0 3 * * *

# Activar/desactivar job de neteja autom√†tica
# Valors: true | false
# - true: Job actiu (recomanat en production)
# - false: Job desactivat (√∫til per testing)
# 
# Nota: El job nom√©s s'executa si NODE_ENV=production
CLEANUP_ENABLED=true

# =============================================================================
# NOTES ADDICIONALS
# =============================================================================
#
# üìù PRIMER DESPLEGAMENT:
# 1. Copia aquest fitxer: cp .env.example .env
# 2. Genera secrets JWT nous amb: openssl rand -base64 32
# 3. Configura la base de dades (host, user, password, database)
# 4. Ajusta CORS_ORIGIN amb el domini del teu frontend
# 5. Configura LOG_LEVEL=info per producci√≥
#
# üîê SEGURETAT:
# - El fitxer .env NO s'ha de pujar a Git (ja est√† a .gitignore)
# - Els secrets JWT han de ser √∫nics per cada entorn
# - Rota els secrets JWT peri√≤dicament (cada 3-6 mesos)
# - Usa HTTPS en producci√≥ sempre
#
# üöÄ PRODUCCI√ì:
# - NODE_ENV=production
# - HOST=0.0.0.0 (per acceptar connexions)
# - LOG_LEVEL=info o warn
# - CORS_ORIGIN amb domini real
# - Secrets JWT √∫nics i forts
# - DB_PASSWORD fort i √∫nic
#
# =============================================================================
